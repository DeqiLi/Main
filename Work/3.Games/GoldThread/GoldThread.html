<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Game of Gold Thread</title></head><body><style type="text/css">body {    background-image: url("texture11.jpg");    background-color: #cccccc;		font-family: Tahoma, sans-serif;}p { color: gold; font-family: Tahoma, sans-serif;} </style><h1>  <p id="p1" class="cp1" ><strong> Gold Thread </strong></p> </h1> <h4> <p id="maps" class="map">loading..</p></h4><h6> <p id="instruct" class="map">Esc: back<br>Arrows: go<br>Enter: (re)start</p> </h6><!--script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script--><script src="http://code.jquery.com/jquery-1.4.4.js"></script><script type="text/javascript"> var div = new Array(); // division for pearlsvar DivExist = new Array(); // whether a pearl exist in the mapvar DivVisited = new Array(); // whether a pearl has been visitedvar DivVisitedRow = new Array(); // the Row of a pearl that has been visitedvar DivVisitedCol = new Array(); // the Col of a pearl that has been visitedvar p; // current pearl no.var nPearls; // the number of pearlsvar Success = false; // whether the current game succeeded or failedvar threadH = new Array(); // division for horizental connection between two neigbour pearlsvar threadV = new Array(); // division for vertical connection between two neigbour pearlsvar ThreadHExist = new Array(); // whether such a division above existsvar ThreadVExist = new Array(); // whether such a division above existsvar ThreadHVisited = new Array(); // whether such a division above has been visitedvar ThreadVVisited = new Array(); // whether such a division above has been visitedvar nRow=4; // total rows of the whole matrix; from 4 to 9var nCol=nRow+1;	// total cols of the whole matrix	var row; // x of current pearlvar col; // y of current pearlvar Probability = 0.4; // the probability that remove the connection between two Lakes or two Lands;var Hardness=1.0/Probability; // more connections are removed, easier the game becomes.var Rank=nRow-1; // player's initial rankvar HighestRank=7; // the current data is a small data set and can be upgraded to use databasevar Score=0; // Player's scorevar nPlayOnSameRank=3; // pass 2 plays in a rank, then upgrade to a higher rankvar play=0; // number of plays that the player has succeededvar ms=0;   // timing var Cell = new Array(); // Cell map is the mould/outline of the pearl matrix; it is generated by another programfunction readCellData(size, index) { // size and index of cell map; size = nRow-1 (also Rank=size)	switch(size){		case 3: // size=nRow-1=3; nRow=4			switch(index) {	// index is a random number from 0 to 9							case 0:					Cell[0*4+0]='X';  Cell[0*4+1]='O';  Cell[0*4+2]='O';  Cell[0*4+3]='O';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='X';  Cell[1*4+3]='X';  					Cell[2*4+0]='X';  Cell[2*4+1]='O';  Cell[2*4+2]='O';  Cell[2*4+3]='O';  					break;									case 1:					Cell[0*4+0]='O';  Cell[0*4+1]='O';  Cell[0*4+2]='O';  Cell[0*4+3]='O';  					Cell[1*4+0]='X';  Cell[1*4+1]='O';  Cell[1*4+2]='X';  Cell[1*4+3]='O';  					Cell[2*4+0]='O';  Cell[2*4+1]='O';  Cell[2*4+2]='X';  Cell[2*4+3]='O';  					break;									case 2:					Cell[0*4+0]='X';  Cell[0*4+1]='O';  Cell[0*4+2]='X';  Cell[0*4+3]='O';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='O';  Cell[1*4+3]='O';  					Cell[2*4+0]='O';  Cell[2*4+1]='X';  Cell[2*4+2]='O';  Cell[2*4+3]='X';  					break;									case 3:					Cell[0*4+0]='O';  Cell[0*4+1]='X';  Cell[0*4+2]='X';  Cell[0*4+3]='O';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='O';  Cell[1*4+3]='O';  					Cell[2*4+0]='O';  Cell[2*4+1]='X';  Cell[2*4+2]='X';  Cell[2*4+3]='O';  					break;									case 4:					Cell[0*4+0]='O';  Cell[0*4+1]='X';  Cell[0*4+2]='X';  Cell[0*4+3]='O';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='O';  Cell[1*4+3]='O';  					Cell[2*4+0]='O';  Cell[2*4+1]='X';  Cell[2*4+2]='X';  Cell[2*4+3]='O';  					break;									case 5:					Cell[0*4+0]='O';  Cell[0*4+1]='O';  Cell[0*4+2]='O';  Cell[0*4+3]='X';  					Cell[1*4+0]='X';  Cell[1*4+1]='X';  Cell[1*4+2]='O';  Cell[1*4+3]='O';  					Cell[2*4+0]='O';  Cell[2*4+1]='O';  Cell[2*4+2]='O';  Cell[2*4+3]='X';  					break;									case 6:					Cell[0*4+0]='O';  Cell[0*4+1]='O';  Cell[0*4+2]='O';  Cell[0*4+3]='O';  					Cell[1*4+0]='X';  Cell[1*4+1]='O';  Cell[1*4+2]='X';  Cell[1*4+3]='O';  					Cell[2*4+0]='O';  Cell[2*4+1]='O';  Cell[2*4+2]='X';  Cell[2*4+3]='O';  					break;									case 7:					Cell[0*4+0]='O';  Cell[0*4+1]='X';  Cell[0*4+2]='O';  Cell[0*4+3]='X';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='O';  Cell[1*4+3]='O';  					Cell[2*4+0]='X';  Cell[2*4+1]='O';  Cell[2*4+2]='X';  Cell[2*4+3]='O';  					break;									case 8:					Cell[0*4+0]='O';  Cell[0*4+1]='X';  Cell[0*4+2]='O';  Cell[0*4+3]='O';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='O';  Cell[1*4+3]='X';  					Cell[2*4+0]='O';  Cell[2*4+1]='X';  Cell[2*4+2]='O';  Cell[2*4+3]='O';  					break;									case 9:					Cell[0*4+0]='X';  Cell[0*4+1]='O';  Cell[0*4+2]='O';  Cell[0*4+3]='O';  					Cell[1*4+0]='O';  Cell[1*4+1]='O';  Cell[1*4+2]='X';  Cell[1*4+3]='X';  					Cell[2*4+0]='X';  Cell[2*4+1]='O';  Cell[2*4+2]='O';  Cell[2*4+3]='O';  					break;				default: break;			}			break;						case 4: // size=nRow-1=4; nRow=5			switch(index) {				case 0:					Cell[0*5+0]='X';  Cell[0*5+1]='X';  Cell[0*5+2]='O';  Cell[0*5+3]='O';  Cell[0*5+4]='O';  					Cell[1*5+0]='X';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='X';  Cell[1*5+4]='O';  					Cell[2*5+0]='O';  Cell[2*5+1]='O';  Cell[2*5+2]='X';  Cell[2*5+3]='X';  Cell[2*5+4]='X';  					Cell[3*5+0]='X';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='O';  Cell[3*5+4]='O';  					break;				case 1:					Cell[0*5+0]='X';  Cell[0*5+1]='O';  Cell[0*5+2]='X';  Cell[0*5+3]='O';  Cell[0*5+4]='X';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='O';  Cell[1*5+4]='O';  					Cell[2*5+0]='O';  Cell[2*5+1]='X';  Cell[2*5+2]='X';  Cell[2*5+3]='X';  Cell[2*5+4]='O';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='X';  Cell[3*5+4]='O';  					break;				case 2:					Cell[0*5+0]='O';  Cell[0*5+1]='X';  Cell[0*5+2]='O';  Cell[0*5+3]='O';  Cell[0*5+4]='O';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='X';  Cell[1*5+4]='O';  					Cell[2*5+0]='X';  Cell[2*5+1]='O';  Cell[2*5+2]='X';  Cell[2*5+3]='X';  Cell[2*5+4]='X';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='O';  Cell[3*5+4]='O';  					break;				case 3:					Cell[0*5+0]='O';  Cell[0*5+1]='O';  Cell[0*5+2]='O';  Cell[0*5+3]='O';  Cell[0*5+4]='O';  					Cell[1*5+0]='X';  Cell[1*5+1]='X';  Cell[1*5+2]='X';  Cell[1*5+3]='O';  Cell[1*5+4]='X';  					Cell[2*5+0]='O';  Cell[2*5+1]='X';  Cell[2*5+2]='O';  Cell[2*5+3]='O';  Cell[2*5+4]='O';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='X';  Cell[3*5+4]='O';  					break;				case 4:					Cell[0*5+0]='X';  Cell[0*5+1]='O';  Cell[0*5+2]='X';  Cell[0*5+3]='X';  Cell[0*5+4]='O';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='O';  Cell[1*5+4]='O';  					Cell[2*5+0]='X';  Cell[2*5+1]='X';  Cell[2*5+2]='X';  Cell[2*5+3]='O';  Cell[2*5+4]='X';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='O';  Cell[3*5+4]='O';  					break;				case 5:					Cell[0*5+0]='O';  Cell[0*5+1]='O';  Cell[0*5+2]='X';  Cell[0*5+3]='O';  Cell[0*5+4]='O';  					Cell[1*5+0]='X';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='O';  Cell[1*5+4]='X';  					Cell[2*5+0]='O';  Cell[2*5+1]='O';  Cell[2*5+2]='X';  Cell[2*5+3]='O';  Cell[2*5+4]='O';  					Cell[3*5+0]='X';  Cell[3*5+1]='O';  Cell[3*5+2]='X';  Cell[3*5+3]='O';  Cell[3*5+4]='X';  					break;				case 6:					Cell[0*5+0]='O';  Cell[0*5+1]='X';  Cell[0*5+2]='O';  Cell[0*5+3]='O';  Cell[0*5+4]='O';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='X';  Cell[1*5+4]='X';  					Cell[2*5+0]='X';  Cell[2*5+1]='X';  Cell[2*5+2]='O';  Cell[2*5+3]='X';  Cell[2*5+4]='O';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='O';  Cell[3*5+4]='O';  					break;				case 7:					Cell[0*5+0]='X';  Cell[0*5+1]='O';  Cell[0*5+2]='X';  Cell[0*5+3]='O';  Cell[0*5+4]='X';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='O';  Cell[1*5+4]='O';  					Cell[2*5+0]='X';  Cell[2*5+1]='X';  Cell[2*5+2]='X';  Cell[2*5+3]='O';  Cell[2*5+4]='X';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='O';  Cell[3*5+3]='O';  Cell[3*5+4]='O';  					break;				case 8:					Cell[0*5+0]='O';  Cell[0*5+1]='X';  Cell[0*5+2]='O';  Cell[0*5+3]='O';  Cell[0*5+4]='O';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='X';  Cell[1*5+4]='X';  					Cell[2*5+0]='O';  Cell[2*5+1]='X';  Cell[2*5+2]='O';  Cell[2*5+3]='O';  Cell[2*5+4]='O';  					Cell[3*5+0]='O';  Cell[3*5+1]='X';  Cell[3*5+2]='O';  Cell[3*5+3]='X';  Cell[3*5+4]='O';  					break;				case 9:					Cell[0*5+0]='O';  Cell[0*5+1]='X';  Cell[0*5+2]='O';  Cell[0*5+3]='X';  Cell[0*5+4]='O';  					Cell[1*5+0]='O';  Cell[1*5+1]='O';  Cell[1*5+2]='O';  Cell[1*5+3]='O';  Cell[1*5+4]='O';  					Cell[2*5+0]='X';  Cell[2*5+1]='O';  Cell[2*5+2]='X';  Cell[2*5+3]='O';  Cell[2*5+4]='X';  					Cell[3*5+0]='O';  Cell[3*5+1]='O';  Cell[3*5+2]='X';  Cell[3*5+3]='O';  Cell[3*5+4]='O';  					break;				default: break;			}			break;						case 5:				switch(index) {				case 0:					Cell[0*6+0]='X';  Cell[0*6+1]='O';  Cell[0*6+2]='X';  Cell[0*6+3]='O';  Cell[0*6+4]='X';  Cell[0*6+5]='O';  					Cell[1*6+0]='O';  Cell[1*6+1]='O';  Cell[1*6+2]='O';  Cell[1*6+3]='O';  Cell[1*6+4]='O';  Cell[1*6+5]='O';  					Cell[2*6+0]='X';  Cell[2*6+1]='O';  Cell[2*6+2]='X';  Cell[2*6+3]='O';  Cell[2*6+4]='X';  Cell[2*6+5]='X';  					Cell[3*6+0]='O';  Cell[3*6+1]='O';  Cell[3*6+2]='X';  Cell[3*6+3]='O';  Cell[3*6+4]='O';  Cell[3*6+5]='O';  					Cell[4*6+0]='O';  Cell[4*6+1]='X';  Cell[4*6+2]='X';  Cell[4*6+3]='O';  Cell[4*6+4]='X';  Cell[4*6+5]='O';  					break;				case 1:					Cell[0*6+0]='O';  Cell[0*6+1]='O';  Cell[0*6+2]='X';  Cell[0*6+3]='O';  Cell[0*6+4]='X';  Cell[0*6+5]='O';  					Cell[1*6+0]='X';  Cell[1*6+1]='O';  Cell[1*6+2]='X';  Cell[1*6+3]='O';  Cell[1*6+4]='X';  Cell[1*6+5]='O';  					Cell[2*6+0]='O';  Cell[2*6+1]='O';  Cell[2*6+2]='O';  Cell[2*6+3]='O';  Cell[2*6+4]='X';  Cell[2*6+5]='O';  					Cell[3*6+0]='O';  Cell[3*6+1]='X';  Cell[3*6+2]='X';  Cell[3*6+3]='O';  Cell[3*6+4]='O';  Cell[3*6+5]='O';  					Cell[4*6+0]='O';  Cell[4*6+1]='X';  Cell[4*6+2]='O';  Cell[4*6+3]='O';  Cell[4*6+4]='X';  Cell[4*6+5]='O';  					break;				case 2:					Cell[0*6+0]='O';  Cell[0*6+1]='X';  Cell[0*6+2]='O';  Cell[0*6+3]='X';  Cell[0*6+4]='X';  Cell[0*6+5]='O';  					Cell[1*6+0]='O';  Cell[1*6+1]='O';  Cell[1*6+2]='O';  Cell[1*6+3]='O';  Cell[1*6+4]='X';  Cell[1*6+5]='O';  					Cell[2*6+0]='O';  Cell[2*6+1]='X';  Cell[2*6+2]='O';  Cell[2*6+3]='X';  Cell[2*6+4]='X';  Cell[2*6+5]='O';  					Cell[3*6+0]='X';  Cell[3*6+1]='X';  Cell[3*6+2]='O';  Cell[3*6+3]='O';  Cell[3*6+4]='O';  Cell[3*6+5]='O';  					Cell[4*6+0]='O';  Cell[4*6+1]='O';  Cell[4*6+2]='O';  Cell[4*6+3]='X';  Cell[4*6+4]='O';  Cell[4*6+5]='X';  					break;				case 3:					Cell[0*6+0]='O';  Cell[0*6+1]='X';  Cell[0*6+2]='X';  Cell[0*6+3]='O';  Cell[0*6+4]='X';  Cell[0*6+5]='X';  					Cell[1*6+0]='O';  Cell[1*6+1]='O';  Cell[1*6+2]='O';  Cell[1*6+3]='O';  Cell[1*6+4]='O';  Cell[1*6+5]='X';  					Cell[2*6+0]='X';  Cell[2*6+1]='O';  Cell[2*6+2]='X';  Cell[2*6+3]='X';  Cell[2*6+4]='O';  Cell[2*6+5]='O';  					Cell[3*6+0]='X';  Cell[3*6+1]='X';  Cell[3*6+2]='X';  Cell[3*6+3]='X';  Cell[3*6+4]='O';  Cell[3*6+5]='X';  					Cell[4*6+0]='O';  Cell[4*6+1]='O';  Cell[4*6+2]='O';  Cell[4*6+3]='O';  Cell[4*6+4]='O';  Cell[4*6+5]='O';  					break;				case 4:					Cell[0*6+0]='O';  Cell[0*6+1]='O';  Cell[0*6+2]='O';  Cell[0*6+3]='O';  Cell[0*6+4]='X';  Cell[0*6+5]='O';  					Cell[1*6+0]='X';  Cell[1*6+1]='X';  Cell[1*6+2]='O';  Cell[1*6+3]='X';  Cell[1*6+4]='X';  Cell[1*6+5]='O';  					Cell[2*6+0]='X';  Cell[2*6+1]='O';  Cell[2*6+2]='O';  Cell[2*6+3]='O';  Cell[2*6+4]='X';  Cell[2*6+5]='O';  					Cell[3*6+0]='O';  Cell[3*6+1]='O';  Cell[3*6+2]='X';  Cell[3*6+3]='O';  Cell[3*6+4]='O';  Cell[3*6+5]='O';  					Cell[4*6+0]='X';  Cell[4*6+1]='O';  Cell[4*6+2]='X';  Cell[4*6+3]='O';  Cell[4*6+4]='X';  Cell[4*6+5]='O';  					break;				case 5:					Cell[0*6+0]='O';  Cell[0*6+1]='X';  Cell[0*6+2]='O';  Cell[0*6+3]='X';  Cell[0*6+4]='O';  Cell[0*6+5]='X';  					Cell[1*6+0]='O';  Cell[1*6+1]='O';  Cell[1*6+2]='O';  Cell[1*6+3]='O';  Cell[1*6+4]='O';  Cell[1*6+5]='O';  					Cell[2*6+0]='X';  Cell[2*6+1]='X';  Cell[2*6+2]='X';  Cell[2*6+3]='O';  Cell[2*6+4]='X';  Cell[2*6+5]='X';  					Cell[3*6+0]='O';  Cell[3*6+1]='O';  Cell[3*6+2]='O';  Cell[3*6+3]='O';  Cell[3*6+4]='O';  Cell[3*6+5]='O';  					Cell[4*6+0]='O';  Cell[4*6+1]='X';  Cell[4*6+2]='O';  Cell[4*6+3]='X';  Cell[4*6+4]='O';  Cell[4*6+5]='X';  					break;				case 6:					Cell[0*6+0]='O';  Cell[0*6+1]='X';  Cell[0*6+2]='X';  Cell[0*6+3]='O';  Cell[0*6+4]='O';  Cell[0*6+5]='O';  					Cell[1*6+0]='O';  Cell[1*6+1]='X';  Cell[1*6+2]='O';  Cell[1*6+3]='O';  Cell[1*6+4]='X';  Cell[1*6+5]='X';  					Cell[2*6+0]='O';  Cell[2*6+1]='X';  Cell[2*6+2]='X';  Cell[2*6+3]='O';  Cell[2*6+4]='O';  Cell[2*6+5]='O';  					Cell[3*6+0]='O';  Cell[3*6+1]='O';  Cell[3*6+2]='O';  Cell[3*6+3]='O';  Cell[3*6+4]='X';  Cell[3*6+5]='O';  					Cell[4*6+0]='X';  Cell[4*6+1]='O';  Cell[4*6+2]='X';  Cell[4*6+3]='O';  Cell[4*6+4]='X';  Cell[4*6+5]='O';  					break;				case 7:					Cell[0*6+0]='O';  Cell[0*6+1]='X';  Cell[0*6+2]='O';  Cell[0*6+3]='O';  Cell[0*6+4]='O';  Cell[0*6+5]='O';  					Cell[1*6+0]='O';  Cell[1*6+1]='X';  Cell[1*6+2]='O';  Cell[1*6+3]='X';  Cell[1*6+4]='X';  Cell[1*6+5]='O';  					Cell[2*6+0]='O';  Cell[2*6+1]='O';  Cell[2*6+2]='O';  Cell[2*6+3]='O';  Cell[2*6+4]='X';  Cell[2*6+5]='O';  					Cell[3*6+0]='X';  Cell[3*6+1]='O';  Cell[3*6+2]='X';  Cell[3*6+3]='O';  Cell[3*6+4]='X';  Cell[3*6+5]='X';  					Cell[4*6+0]='O';  Cell[4*6+1]='O';  Cell[4*6+2]='X';  Cell[4*6+3]='O';  Cell[4*6+4]='O';  Cell[4*6+5]='O';  					break;				case 8:					Cell[0*6+0]='O';  Cell[0*6+1]='O';  Cell[0*6+2]='O';  Cell[0*6+3]='O';  Cell[0*6+4]='X';  Cell[0*6+5]='O';  					Cell[1*6+0]='X';  Cell[1*6+1]='X';  Cell[1*6+2]='X';  Cell[1*6+3]='O';  Cell[1*6+4]='O';  Cell[1*6+5]='O';  					Cell[2*6+0]='O';  Cell[2*6+1]='O';  Cell[2*6+2]='X';  Cell[2*6+3]='X';  Cell[2*6+4]='O';  Cell[2*6+5]='X';  					Cell[3*6+0]='X';  Cell[3*6+1]='O';  Cell[3*6+2]='X';  Cell[3*6+3]='X';  Cell[3*6+4]='O';  Cell[3*6+5]='X';  					Cell[4*6+0]='O';  Cell[4*6+1]='O';  Cell[4*6+2]='O';  Cell[4*6+3]='O';  Cell[4*6+4]='O';  Cell[4*6+5]='O';  					break;				case 9:					Cell[0*6+0]='O';  Cell[0*6+1]='O';  Cell[0*6+2]='O';  Cell[0*6+3]='O';  Cell[0*6+4]='O';  Cell[0*6+5]='O';  					Cell[1*6+0]='X';  Cell[1*6+1]='X';  Cell[1*6+2]='O';  Cell[1*6+3]='X';  Cell[1*6+4]='X';  Cell[1*6+5]='O';  					Cell[2*6+0]='O';  Cell[2*6+1]='X';  Cell[2*6+2]='O';  Cell[2*6+3]='X';  Cell[2*6+4]='X';  Cell[2*6+5]='X';  					Cell[3*6+0]='O';  Cell[3*6+1]='O';  Cell[3*6+2]='O';  Cell[3*6+3]='O';  Cell[3*6+4]='X';  Cell[3*6+5]='O';  					Cell[4*6+0]='X';  Cell[4*6+1]='O';  Cell[4*6+2]='X';  Cell[4*6+3]='O';  Cell[4*6+4]='O';  Cell[4*6+5]='O';  					break;				default: break;		}		break;				case 6: //!				switch(index) {				case 0:					Cell[0*7+0]='O';  Cell[0*7+1]='O';  Cell[0*7+2]='O';  Cell[0*7+3]='O';  Cell[0*7+4]='O';  Cell[0*7+5]='X';  Cell[0*7+6]='O';  					Cell[1*7+0]='O';  Cell[1*7+1]='X';  Cell[1*7+2]='O';  Cell[1*7+3]='X';  Cell[1*7+4]='X';  Cell[1*7+5]='X';  Cell[1*7+6]='O';  					Cell[2*7+0]='O';  Cell[2*7+1]='X';  Cell[2*7+2]='O';  Cell[2*7+3]='X';  Cell[2*7+4]='X';  Cell[2*7+5]='O';  Cell[2*7+6]='O';  					Cell[3*7+0]='O';  Cell[3*7+1]='X';  Cell[3*7+2]='O';  Cell[3*7+3]='O';  Cell[3*7+4]='X';  Cell[3*7+5]='O';  Cell[3*7+6]='X';  					Cell[4*7+0]='O';  Cell[4*7+1]='X';  Cell[4*7+2]='X';  Cell[4*7+3]='O';  Cell[4*7+4]='O';  Cell[4*7+5]='O';  Cell[4*7+6]='O';  					Cell[5*7+0]='O';  Cell[5*7+1]='O';  Cell[5*7+2]='X';  Cell[5*7+3]='X';  Cell[5*7+4]='O';  Cell[5*7+5]='X';  Cell[5*7+6]='O';  					break;				case 1:					Cell[0*7+0]='O';  Cell[0*7+1]='X';  Cell[0*7+2]='O';  Cell[0*7+3]='X';  Cell[0*7+4]='X';  Cell[0*7+5]='O';  Cell[0*7+6]='O';  					Cell[1*7+0]='O';  Cell[1*7+1]='O';  Cell[1*7+2]='O';  Cell[1*7+3]='O';  Cell[1*7+4]='O';  Cell[1*7+5]='O';  Cell[1*7+6]='X';  					Cell[2*7+0]='X';  Cell[2*7+1]='O';  Cell[2*7+2]='X';  Cell[2*7+3]='X';  Cell[2*7+4]='X';  Cell[2*7+5]='O';  Cell[2*7+6]='O';  					Cell[3*7+0]='O';  Cell[3*7+1]='O';  Cell[3*7+2]='X';  Cell[3*7+3]='O';  Cell[3*7+4]='O';  Cell[3*7+5]='O';  Cell[3*7+6]='X';  					Cell[4*7+0]='X';  Cell[4*7+1]='X';  Cell[4*7+2]='X';  Cell[4*7+3]='X';  Cell[4*7+4]='X';  Cell[4*7+5]='O';  Cell[4*7+6]='X';  					Cell[5*7+0]='O';  Cell[5*7+1]='O';  Cell[5*7+2]='O';  Cell[5*7+3]='O';  Cell[5*7+4]='O';  Cell[5*7+5]='O';  Cell[5*7+6]='O';  					break;				case 2:					Cell[0*7+0]='O';  Cell[0*7+1]='O';  Cell[0*7+2]='X';  Cell[0*7+3]='O';  Cell[0*7+4]='X';  Cell[0*7+5]='X';  Cell[0*7+6]='O';  					Cell[1*7+0]='X';  Cell[1*7+1]='O';  Cell[1*7+2]='O';  Cell[1*7+3]='O';  Cell[1*7+4]='O';  Cell[1*7+5]='O';  Cell[1*7+6]='O';  					Cell[2*7+0]='O';  Cell[2*7+1]='O';  Cell[2*7+2]='X';  Cell[2*7+3]='O';  Cell[2*7+4]='X';  Cell[2*7+5]='X';  Cell[2*7+6]='O';  					Cell[3*7+0]='O';  Cell[3*7+1]='X';  Cell[3*7+2]='X';  Cell[3*7+3]='X';  Cell[3*7+4]='X';  Cell[3*7+5]='O';  Cell[3*7+6]='O';  					Cell[4*7+0]='O';  Cell[4*7+1]='X';  Cell[4*7+2]='O';  Cell[4*7+3]='X';  Cell[4*7+4]='O';  Cell[4*7+5]='O';  Cell[4*7+6]='X';  					Cell[5*7+0]='O';  Cell[5*7+1]='X';  Cell[5*7+2]='O';  Cell[5*7+3]='O';  Cell[5*7+4]='O';  Cell[5*7+5]='X';  Cell[5*7+6]='X';  					break;				case 3:					Cell[0*7+0]='O';  Cell[0*7+1]='X';  Cell[0*7+2]='O';  Cell[0*7+3]='X';  Cell[0*7+4]='O';  Cell[0*7+5]='X';  Cell[0*7+6]='O';  					Cell[1*7+0]='O';  Cell[1*7+1]='O';  Cell[1*7+2]='O';  Cell[1*7+3]='X';  Cell[1*7+4]='O';  Cell[1*7+5]='O';  Cell[1*7+6]='O';  					Cell[2*7+0]='O';  Cell[2*7+1]='X';  Cell[2*7+2]='O';  Cell[2*7+3]='O';  Cell[2*7+4]='O';  Cell[2*7+5]='X';  Cell[2*7+6]='O';  					Cell[3*7+0]='X';  Cell[3*7+1]='X';  Cell[3*7+2]='X';  Cell[3*7+3]='O';  Cell[3*7+4]='X';  Cell[3*7+5]='X';  Cell[3*7+6]='X';  					Cell[4*7+0]='X';  Cell[4*7+1]='O';  Cell[4*7+2]='O';  Cell[4*7+3]='O';  Cell[4*7+4]='O';  Cell[4*7+5]='O';  Cell[4*7+6]='O';  					Cell[5*7+0]='O';  Cell[5*7+1]='O';  Cell[5*7+2]='X';  Cell[5*7+3]='O';  Cell[5*7+4]='X';  Cell[5*7+5]='O';  Cell[5*7+6]='X';  					break;				case 4:					Cell[0*7+0]='O';  Cell[0*7+1]='O';  Cell[0*7+2]='O';  Cell[0*7+3]='O';  Cell[0*7+4]='O';  Cell[0*7+5]='O';  Cell[0*7+6]='X';  					Cell[1*7+0]='O';  Cell[1*7+1]='X';  Cell[1*7+2]='X';  Cell[1*7+3]='O';  Cell[1*7+4]='X';  Cell[1*7+5]='O';  Cell[1*7+6]='O';  					Cell[2*7+0]='X';  Cell[2*7+1]='X';  Cell[2*7+2]='X';  Cell[2*7+3]='X';  Cell[2*7+4]='X';  Cell[2*7+5]='O';  Cell[2*7+6]='X';  					Cell[3*7+0]='O';  Cell[3*7+1]='O';  Cell[3*7+2]='O';  Cell[3*7+3]='O';  Cell[3*7+4]='O';  Cell[3*7+5]='O';  Cell[3*7+6]='O';  					Cell[4*7+0]='O';  Cell[4*7+1]='X';  Cell[4*7+2]='X';  Cell[4*7+3]='O';  Cell[4*7+4]='X';  Cell[4*7+5]='O';  Cell[4*7+6]='X';  					Cell[5*7+0]='O';  Cell[5*7+1]='X';  Cell[5*7+2]='O';  Cell[5*7+3]='O';  Cell[5*7+4]='X';  Cell[5*7+5]='O';  Cell[5*7+6]='O';  					break;				case 5://!!! nRow=7, index=5, p<.2 or p<.9					Cell[0*7+0]='X';  Cell[0*7+1]='X';  Cell[0*7+2]='X';  Cell[0*7+3]='O';  Cell[0*7+4]='X';  Cell[0*7+5]='O';  Cell[0*7+6]='O';  					Cell[1*7+0]='X';  Cell[1*7+1]='X';  Cell[1*7+2]='O';  Cell[1*7+3]='O';  Cell[1*7+4]='O';  Cell[1*7+5]='O';  Cell[1*7+6]='X';  					Cell[2*7+0]='X';  Cell[2*7+1]='O';  Cell[2*7+2]='O';  Cell[2*7+3]='X';  Cell[2*7+4]='X';  Cell[2*7+5]='O';  Cell[2*7+6]='X';  					Cell[3*7+0]='O';  Cell[3*7+1]='O';  Cell[3*7+2]='X';  Cell[3*7+3]='X';  Cell[3*7+4]='O';  Cell[3*7+5]='O';  Cell[3*7+6]='O';  					Cell[4*7+0]='O';  Cell[4*7+1]='X';  Cell[4*7+2]='X';  Cell[4*7+3]='X';  Cell[4*7+4]='X';  Cell[4*7+5]='O';  Cell[4*7+6]='X';  					Cell[5*7+0]='O';  Cell[5*7+1]='X';  Cell[5*7+2]='O';  Cell[5*7+3]='O';  Cell[5*7+4]='O';  Cell[5*7+5]='O';  Cell[5*7+6]='O';  					break;				case 6:					Cell[0*7+0]='O';  Cell[0*7+1]='X';  Cell[0*7+2]='O';  Cell[0*7+3]='O';  Cell[0*7+4]='X';  Cell[0*7+5]='O';  Cell[0*7+6]='O';  					Cell[1*7+0]='O';  Cell[1*7+1]='X';  Cell[1*7+2]='O';  Cell[1*7+3]='X';  Cell[1*7+4]='X';  Cell[1*7+5]='O';  Cell[1*7+6]='X';  					Cell[2*7+0]='O';  Cell[2*7+1]='O';  Cell[2*7+2]='O';  Cell[2*7+3]='O';  Cell[2*7+4]='O';  Cell[2*7+5]='O';  Cell[2*7+6]='O';  					Cell[3*7+0]='O';  Cell[3*7+1]='X';  Cell[3*7+2]='X';  Cell[3*7+3]='X';  Cell[3*7+4]='O';  Cell[3*7+5]='X';  Cell[3*7+6]='O';  					Cell[4*7+0]='O';  Cell[4*7+1]='X';  Cell[4*7+2]='O';  Cell[4*7+3]='O';  Cell[4*7+4]='O';  Cell[4*7+5]='X';  Cell[4*7+6]='O';  					Cell[5*7+0]='O';  Cell[5*7+1]='X';  Cell[5*7+2]='X';  Cell[5*7+3]='O';  Cell[5*7+4]='X';  Cell[5*7+5]='X';  Cell[5*7+6]='O';  					break;				case 7:					Cell[0*7+0]='O';  Cell[0*7+1]='O';  Cell[0*7+2]='O';  Cell[0*7+3]='X';  Cell[0*7+4]='X';  Cell[0*7+5]='O';  Cell[0*7+6]='O';  					Cell[1*7+0]='X';  Cell[1*7+1]='O';  Cell[1*7+2]='X';  Cell[1*7+3]='X';  Cell[1*7+4]='O';  Cell[1*7+5]='O';  Cell[1*7+6]='X';  					Cell[2*7+0]='O';  Cell[2*7+1]='O';  Cell[2*7+2]='O';  Cell[2*7+3]='O';  Cell[2*7+4]='O';  Cell[2*7+5]='X';  Cell[2*7+6]='X';  					Cell[3*7+0]='X';  Cell[3*7+1]='O';  Cell[3*7+2]='X';  Cell[3*7+3]='X';  Cell[3*7+4]='O';  Cell[3*7+5]='O';  Cell[3*7+6]='O';  					Cell[4*7+0]='O';  Cell[4*7+1]='O';  Cell[4*7+2]='O';  Cell[4*7+3]='X';  Cell[4*7+4]='O';  Cell[4*7+5]='X';  Cell[4*7+6]='X';  					Cell[5*7+0]='X';  Cell[5*7+1]='O';  Cell[5*7+2]='X';  Cell[5*7+3]='X';  Cell[5*7+4]='O';  Cell[5*7+5]='O';  Cell[5*7+6]='O';  					break;				case 8:					Cell[0*7+0]='X';  Cell[0*7+1]='O';  Cell[0*7+2]='X';  Cell[0*7+3]='X';  Cell[0*7+4]='O';  Cell[0*7+5]='X';  Cell[0*7+6]='O';  					Cell[1*7+0]='O';  Cell[1*7+1]='O';  Cell[1*7+2]='O';  Cell[1*7+3]='O';  Cell[1*7+4]='O';  Cell[1*7+5]='O';  Cell[1*7+6]='O';  					Cell[2*7+0]='O';  Cell[2*7+1]='X';  Cell[2*7+2]='X';  Cell[2*7+3]='X';  Cell[2*7+4]='O';  Cell[2*7+5]='X';  Cell[2*7+6]='X';  					Cell[3*7+0]='X';  Cell[3*7+1]='X';  Cell[3*7+2]='O';  Cell[3*7+3]='X';  Cell[3*7+4]='O';  Cell[3*7+5]='O';  Cell[3*7+6]='O';  					Cell[4*7+0]='X';  Cell[4*7+1]='O';  Cell[4*7+2]='O';  Cell[4*7+3]='O';  Cell[4*7+4]='O';  Cell[4*7+5]='X';  Cell[4*7+6]='O';  					Cell[5*7+0]='O';  Cell[5*7+1]='O';  Cell[5*7+2]='X';  Cell[5*7+3]='O';  Cell[5*7+4]='X';  Cell[5*7+5]='X';  Cell[5*7+6]='O';  					break;				case 9:					Cell[0*7+0]='X';  Cell[0*7+1]='O';  Cell[0*7+2]='O';  Cell[0*7+3]='O';  Cell[0*7+4]='O';  Cell[0*7+5]='O';  Cell[0*7+6]='O';  					Cell[1*7+0]='O';  Cell[1*7+1]='O';  Cell[1*7+2]='X';  Cell[1*7+3]='O';  Cell[1*7+4]='X';  Cell[1*7+5]='X';  Cell[1*7+6]='X';  					Cell[2*7+0]='O';  Cell[2*7+1]='X';  Cell[2*7+2]='X';  Cell[2*7+3]='O';  Cell[2*7+4]='O';  Cell[2*7+5]='O';  Cell[2*7+6]='O';  					Cell[3*7+0]='O';  Cell[3*7+1]='X';  Cell[3*7+2]='X';  Cell[3*7+3]='X';  Cell[3*7+4]='O';  Cell[3*7+5]='X';  Cell[3*7+6]='X';  					Cell[4*7+0]='O';  Cell[4*7+1]='O';  Cell[4*7+2]='O';  Cell[4*7+3]='X';  Cell[4*7+4]='O';  Cell[4*7+5]='O';  Cell[4*7+6]='O';  					Cell[5*7+0]='X';  Cell[5*7+1]='O';  Cell[5*7+2]='X';  Cell[5*7+3]='X';  Cell[5*7+4]='X';  Cell[5*7+5]='O';  Cell[5*7+6]='X';  					break;				default: break;		}		break;				case 7:				switch(index) {				case 0:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='X';  Cell[0*8+4]='O';  Cell[0*8+5]='X';  Cell[0*8+6]='X';  Cell[0*8+7]='O';  					Cell[1*8+0]='X';  Cell[1*8+1]='X';  Cell[1*8+2]='O';  Cell[1*8+3]='X';  Cell[1*8+4]='O';  Cell[1*8+5]='X';  Cell[1*8+6]='O';  Cell[1*8+7]='O';  					Cell[2*8+0]='O';  Cell[2*8+1]='X';  Cell[2*8+2]='O';  Cell[2*8+3]='X';  Cell[2*8+4]='O';  Cell[2*8+5]='O';  Cell[2*8+6]='O';  Cell[2*8+7]='X';  					Cell[3*8+0]='O';  Cell[3*8+1]='O';  Cell[3*8+2]='O';  Cell[3*8+3]='X';  Cell[3*8+4]='O';  Cell[3*8+5]='X';  Cell[3*8+6]='X';  Cell[3*8+7]='X';  					Cell[4*8+0]='X';  Cell[4*8+1]='X';  Cell[4*8+2]='O';  Cell[4*8+3]='X';  Cell[4*8+4]='O';  Cell[4*8+5]='O';  Cell[4*8+6]='O';  Cell[4*8+7]='X';  					Cell[5*8+0]='X';  Cell[5*8+1]='O';  Cell[5*8+2]='O';  Cell[5*8+3]='O';  Cell[5*8+4]='O';  Cell[5*8+5]='X';  Cell[5*8+6]='O';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='O';  Cell[6*8+2]='X';  Cell[6*8+3]='O';  Cell[6*8+4]='X';  Cell[6*8+5]='X';  Cell[6*8+6]='X';  Cell[6*8+7]='O';  					break;				case 1:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='O';  Cell[0*8+4]='X';  Cell[0*8+5]='X';  Cell[0*8+6]='O';  Cell[0*8+7]='X';  					Cell[1*8+0]='X';  Cell[1*8+1]='X';  Cell[1*8+2]='X';  Cell[1*8+3]='O';  Cell[1*8+4]='O';  Cell[1*8+5]='O';  Cell[1*8+6]='O';  Cell[1*8+7]='O';  					Cell[2*8+0]='O';  Cell[2*8+1]='X';  Cell[2*8+2]='X';  Cell[2*8+3]='X';  Cell[2*8+4]='X';  Cell[2*8+5]='X';  Cell[2*8+6]='O';  Cell[2*8+7]='X';  					Cell[3*8+0]='O';  Cell[3*8+1]='X';  Cell[3*8+2]='O';  Cell[3*8+3]='X';  Cell[3*8+4]='X';  Cell[3*8+5]='O';  Cell[3*8+6]='O';  Cell[3*8+7]='O';  					Cell[4*8+0]='O';  Cell[4*8+1]='O';  Cell[4*8+2]='O';  Cell[4*8+3]='X';  Cell[4*8+4]='O';  Cell[4*8+5]='O';  Cell[4*8+6]='X';  Cell[4*8+7]='X';  					Cell[5*8+0]='X';  Cell[5*8+1]='X';  Cell[5*8+2]='O';  Cell[5*8+3]='X';  Cell[5*8+4]='X';  Cell[5*8+5]='O';  Cell[5*8+6]='O';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='O';  Cell[6*8+2]='O';  Cell[6*8+3]='O';  Cell[6*8+4]='O';  Cell[6*8+5]='O';  Cell[6*8+6]='X';  Cell[6*8+7]='O';  					break;				case 2:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='O';  Cell[0*8+4]='O';  Cell[0*8+5]='X';  Cell[0*8+6]='X';  Cell[0*8+7]='O';  					Cell[1*8+0]='X';  Cell[1*8+1]='X';  Cell[1*8+2]='X';  Cell[1*8+3]='X';  Cell[1*8+4]='O';  Cell[1*8+5]='O';  Cell[1*8+6]='X';  Cell[1*8+7]='O';  					Cell[2*8+0]='O';  Cell[2*8+1]='O';  Cell[2*8+2]='O';  Cell[2*8+3]='O';  Cell[2*8+4]='O';  Cell[2*8+5]='X';  Cell[2*8+6]='X';  Cell[2*8+7]='O';  					Cell[3*8+0]='X';  Cell[3*8+1]='X';  Cell[3*8+2]='X';  Cell[3*8+3]='O';  Cell[3*8+4]='X';  Cell[3*8+5]='X';  Cell[3*8+6]='X';  Cell[3*8+7]='O';  					Cell[4*8+0]='O';  Cell[4*8+1]='X';  Cell[4*8+2]='O';  Cell[4*8+3]='O';  Cell[4*8+4]='O';  Cell[4*8+5]='O';  Cell[4*8+6]='O';  Cell[4*8+7]='O';  					Cell[5*8+0]='O';  Cell[5*8+1]='O';  Cell[5*8+2]='O';  Cell[5*8+3]='X';  Cell[5*8+4]='O';  Cell[5*8+5]='X';  Cell[5*8+6]='O';  Cell[5*8+7]='X';  					Cell[6*8+0]='X';  Cell[6*8+1]='O';  Cell[6*8+2]='X';  Cell[6*8+3]='X';  Cell[6*8+4]='O';  Cell[6*8+5]='X';  Cell[6*8+6]='O';  Cell[6*8+7]='O';  					break;				case 3:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='O';  Cell[0*8+4]='O';  Cell[0*8+5]='O';  Cell[0*8+6]='O';  Cell[0*8+7]='O';  					Cell[1*8+0]='O';  Cell[1*8+1]='X';  Cell[1*8+2]='X';  Cell[1*8+3]='O';  Cell[1*8+4]='X';  Cell[1*8+5]='X';  Cell[1*8+6]='X';  Cell[1*8+7]='X';  					Cell[2*8+0]='O';  Cell[2*8+1]='X';  Cell[2*8+2]='X';  Cell[2*8+3]='O';  Cell[2*8+4]='O';  Cell[2*8+5]='O';  Cell[2*8+6]='O';  Cell[2*8+7]='O';  					Cell[3*8+0]='X';  Cell[3*8+1]='X';  Cell[3*8+2]='O';  Cell[3*8+3]='O';  Cell[3*8+4]='X';  Cell[3*8+5]='O';  Cell[3*8+6]='X';  Cell[3*8+7]='O';  					Cell[4*8+0]='X';  Cell[4*8+1]='O';  Cell[4*8+2]='O';  Cell[4*8+3]='X';  Cell[4*8+4]='X';  Cell[4*8+5]='O';  Cell[4*8+6]='X';  Cell[4*8+7]='O';  					Cell[5*8+0]='O';  Cell[5*8+1]='O';  Cell[5*8+2]='X';  Cell[5*8+3]='X';  Cell[5*8+4]='O';  Cell[5*8+5]='O';  Cell[5*8+6]='X';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='X';  Cell[6*8+2]='X';  Cell[6*8+3]='O';  Cell[6*8+4]='O';  Cell[6*8+5]='X';  Cell[6*8+6]='X';  Cell[6*8+7]='O';  					break;				case 4:					Cell[0*8+0]='O';  Cell[0*8+1]='X';  Cell[0*8+2]='O';  Cell[0*8+3]='X';  Cell[0*8+4]='O';  Cell[0*8+5]='O';  Cell[0*8+6]='X';  Cell[0*8+7]='O';  					Cell[1*8+0]='O';  Cell[1*8+1]='O';  Cell[1*8+2]='O';  Cell[1*8+3]='O';  Cell[1*8+4]='O';  Cell[1*8+5]='X';  Cell[1*8+6]='X';  Cell[1*8+7]='O';  					Cell[2*8+0]='X';  Cell[2*8+1]='X';  Cell[2*8+2]='X';  Cell[2*8+3]='X';  Cell[2*8+4]='O';  Cell[2*8+5]='X';  Cell[2*8+6]='O';  Cell[2*8+7]='O';  					Cell[3*8+0]='O';  Cell[3*8+1]='X';  Cell[3*8+2]='O';  Cell[3*8+3]='O';  Cell[3*8+4]='O';  Cell[3*8+5]='O';  Cell[3*8+6]='O';  Cell[3*8+7]='X';  					Cell[4*8+0]='O';  Cell[4*8+1]='X';  Cell[4*8+2]='X';  Cell[4*8+3]='O';  Cell[4*8+4]='X';  Cell[4*8+5]='X';  Cell[4*8+6]='O';  Cell[4*8+7]='O';  					Cell[5*8+0]='O';  Cell[5*8+1]='O';  Cell[5*8+2]='O';  Cell[5*8+3]='O';  Cell[5*8+4]='O';  Cell[5*8+5]='X';  Cell[5*8+6]='X';  Cell[5*8+7]='X';  					Cell[6*8+0]='O';  Cell[6*8+1]='X';  Cell[6*8+2]='O';  Cell[6*8+3]='X';  Cell[6*8+4]='O';  Cell[6*8+5]='O';  Cell[6*8+6]='O';  Cell[6*8+7]='O';  					break;				case 5:					Cell[0*8+0]='O';  Cell[0*8+1]='X';  Cell[0*8+2]='O';  Cell[0*8+3]='X';  Cell[0*8+4]='O';  Cell[0*8+5]='X';  Cell[0*8+6]='O';  Cell[0*8+7]='O';  					Cell[1*8+0]='O';  Cell[1*8+1]='X';  Cell[1*8+2]='O';  Cell[1*8+3]='X';  Cell[1*8+4]='O';  Cell[1*8+5]='O';  Cell[1*8+6]='O';  Cell[1*8+7]='X';  					Cell[2*8+0]='O';  Cell[2*8+1]='O';  Cell[2*8+2]='O';  Cell[2*8+3]='O';  Cell[2*8+4]='O';  Cell[2*8+5]='X';  Cell[2*8+6]='X';  Cell[2*8+7]='X';  					Cell[3*8+0]='X';  Cell[3*8+1]='X';  Cell[3*8+2]='X';  Cell[3*8+3]='X';  Cell[3*8+4]='O';  Cell[3*8+5]='X';  Cell[3*8+6]='O';  Cell[3*8+7]='X';  					Cell[4*8+0]='X';  Cell[4*8+1]='O';  Cell[4*8+2]='X';  Cell[4*8+3]='O';  Cell[4*8+4]='O';  Cell[4*8+5]='O';  Cell[4*8+6]='O';  Cell[4*8+7]='O';  					Cell[5*8+0]='O';  Cell[5*8+1]='O';  Cell[5*8+2]='O';  Cell[5*8+3]='O';  Cell[5*8+4]='X';  Cell[5*8+5]='X';  Cell[5*8+6]='X';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='X';  Cell[6*8+2]='X';  Cell[6*8+3]='O';  Cell[6*8+4]='O';  Cell[6*8+5]='O';  Cell[6*8+6]='X';  Cell[6*8+7]='O';  					break;				case 6:					Cell[0*8+0]='X';  Cell[0*8+1]='O';  Cell[0*8+2]='X';  Cell[0*8+3]='X';  Cell[0*8+4]='O';  Cell[0*8+5]='O';  Cell[0*8+6]='O';  Cell[0*8+7]='X';  					Cell[1*8+0]='O';  Cell[1*8+1]='O';  Cell[1*8+2]='X';  Cell[1*8+3]='O';  Cell[1*8+4]='O';  Cell[1*8+5]='X';  Cell[1*8+6]='O';  Cell[1*8+7]='O';  					Cell[2*8+0]='X';  Cell[2*8+1]='O';  Cell[2*8+2]='X';  Cell[2*8+3]='X';  Cell[2*8+4]='O';  Cell[2*8+5]='X';  Cell[2*8+6]='X';  Cell[2*8+7]='O';  					Cell[3*8+0]='O';  Cell[3*8+1]='O';  Cell[3*8+2]='O';  Cell[3*8+3]='O';  Cell[3*8+4]='O';  Cell[3*8+5]='O';  Cell[3*8+6]='X';  Cell[3*8+7]='O';  					Cell[4*8+0]='X';  Cell[4*8+1]='O';  Cell[4*8+2]='X';  Cell[4*8+3]='O';  Cell[4*8+4]='X';  Cell[4*8+5]='O';  Cell[4*8+6]='X';  Cell[4*8+7]='X';  					Cell[5*8+0]='X';  Cell[5*8+1]='O';  Cell[5*8+2]='X';  Cell[5*8+3]='X';  Cell[5*8+4]='X';  Cell[5*8+5]='O';  Cell[5*8+6]='O';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='O';  Cell[6*8+2]='O';  Cell[6*8+3]='O';  Cell[6*8+4]='X';  Cell[6*8+5]='X';  Cell[6*8+6]='O';  Cell[6*8+7]='X';  					break;				case 7:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='O';  Cell[0*8+4]='X';  Cell[0*8+5]='O';  Cell[0*8+6]='O';  Cell[0*8+7]='O';  					Cell[1*8+0]='X';  Cell[1*8+1]='O';  Cell[1*8+2]='X';  Cell[1*8+3]='X';  Cell[1*8+4]='X';  Cell[1*8+5]='O';  Cell[1*8+6]='X';  Cell[1*8+7]='X';  					Cell[2*8+0]='O';  Cell[2*8+1]='O';  Cell[2*8+2]='O';  Cell[2*8+3]='O';  Cell[2*8+4]='O';  Cell[2*8+5]='O';  Cell[2*8+6]='O';  Cell[2*8+7]='O';  					Cell[3*8+0]='O';  Cell[3*8+1]='X';  Cell[3*8+2]='O';  Cell[3*8+3]='X';  Cell[3*8+4]='X';  Cell[3*8+5]='X';  Cell[3*8+6]='X';  Cell[3*8+7]='O';  					Cell[4*8+0]='X';  Cell[4*8+1]='X';  Cell[4*8+2]='O';  Cell[4*8+3]='X';  Cell[4*8+4]='O';  Cell[4*8+5]='X';  Cell[4*8+6]='X';  Cell[4*8+7]='X';  					Cell[5*8+0]='O';  Cell[5*8+1]='O';  Cell[5*8+2]='O';  Cell[5*8+3]='O';  Cell[5*8+4]='O';  Cell[5*8+5]='O';  Cell[5*8+6]='O';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='X';  Cell[6*8+2]='O';  Cell[6*8+3]='X';  Cell[6*8+4]='X';  Cell[6*8+5]='O';  Cell[6*8+6]='X';  Cell[6*8+7]='O';  					break;				case 8:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='O';  Cell[0*8+4]='O';  Cell[0*8+5]='X';  Cell[0*8+6]='O';  Cell[0*8+7]='O';  					Cell[1*8+0]='X';  Cell[1*8+1]='X';  Cell[1*8+2]='X';  Cell[1*8+3]='X';  Cell[1*8+4]='O';  Cell[1*8+5]='X';  Cell[1*8+6]='O';  Cell[1*8+7]='X';  					Cell[2*8+0]='X';  Cell[2*8+1]='O';  Cell[2*8+2]='X';  Cell[2*8+3]='O';  Cell[2*8+4]='O';  Cell[2*8+5]='O';  Cell[2*8+6]='O';  Cell[2*8+7]='O';  					Cell[3*8+0]='O';  Cell[3*8+1]='O';  Cell[3*8+2]='X';  Cell[3*8+3]='X';  Cell[3*8+4]='X';  Cell[3*8+5]='X';  Cell[3*8+6]='O';  Cell[3*8+7]='X';  					Cell[4*8+0]='O';  Cell[4*8+1]='X';  Cell[4*8+2]='X';  Cell[4*8+3]='O';  Cell[4*8+4]='O';  Cell[4*8+5]='O';  Cell[4*8+6]='O';  Cell[4*8+7]='O';  					Cell[5*8+0]='O';  Cell[5*8+1]='O';  Cell[5*8+2]='X';  Cell[5*8+3]='X';  Cell[5*8+4]='X';  Cell[5*8+5]='X';  Cell[5*8+6]='O';  Cell[5*8+7]='X';  					Cell[6*8+0]='X';  Cell[6*8+1]='O';  Cell[6*8+2]='O';  Cell[6*8+3]='O';  Cell[6*8+4]='O';  Cell[6*8+5]='O';  Cell[6*8+6]='O';  Cell[6*8+7]='O';  					break;				case 9:					Cell[0*8+0]='O';  Cell[0*8+1]='O';  Cell[0*8+2]='O';  Cell[0*8+3]='O';  Cell[0*8+4]='O';  Cell[0*8+5]='O';  Cell[0*8+6]='O';  Cell[0*8+7]='O';  					Cell[1*8+0]='X';  Cell[1*8+1]='X';  Cell[1*8+2]='X';  Cell[1*8+3]='O';  Cell[1*8+4]='X';  Cell[1*8+5]='O';  Cell[1*8+6]='X';  Cell[1*8+7]='O';  					Cell[2*8+0]='O';  Cell[2*8+1]='O';  Cell[2*8+2]='O';  Cell[2*8+3]='O';  Cell[2*8+4]='X';  Cell[2*8+5]='O';  Cell[2*8+6]='X';  Cell[2*8+7]='X';  					Cell[3*8+0]='X';  Cell[3*8+1]='X';  Cell[3*8+2]='X';  Cell[3*8+3]='O';  Cell[3*8+4]='X';  Cell[3*8+5]='O';  Cell[3*8+6]='O';  Cell[3*8+7]='O';  					Cell[4*8+0]='O';  Cell[4*8+1]='O';  Cell[4*8+2]='O';  Cell[4*8+3]='O';  Cell[4*8+4]='X';  Cell[4*8+5]='X';  Cell[4*8+6]='O';  Cell[4*8+7]='X';  					Cell[5*8+0]='O';  Cell[5*8+1]='X';  Cell[5*8+2]='O';  Cell[5*8+3]='X';  Cell[5*8+4]='X';  Cell[5*8+5]='O';  Cell[5*8+6]='O';  Cell[5*8+7]='O';  					Cell[6*8+0]='O';  Cell[6*8+1]='X';  Cell[6*8+2]='O';  Cell[6*8+3]='X';  Cell[6*8+4]='O';  Cell[6*8+5]='O';  Cell[6*8+6]='X';  Cell[6*8+7]='O';  					break;			default: break;		}		break;		default: break;		}			}// to count the number of Div[i,i]'s neighbour Lands.function countNBLand(i, j){		var nNBLands = 0;		var x, y; // coordination of a neighbour Land/Lake cell						x=i-1; y=j-1; 		if(x>=0 && x<=nRow-2 && y>=0 && y<=nCol-2 && Cell[x*(nCol-1)+y]=='O') nNBLands++; 				y=j; 		if(x>=0 && x<=nRow-2 && y>=0 && y<=nCol-2 && Cell[x*(nCol-1)+y]=='O') nNBLands++; 				x=i; y=j-1;		if(x>=0 && x<=nRow-2 && y>=0 && y<=nCol-2 && Cell[x*(nCol-1)+y]=='O') nNBLands++; 				y=j;		if(x>=0 && x<=nRow-2 && y>=0 && y<=nCol-2 && Cell[x*(nCol-1)+y]=='O') nNBLands++;  		return nNBLands;}// create new div matrix with each cell being a pearl:function createManyDivs2D(Row, Col){		nRow = Row;		nCol = Col;						var index = Math.floor(Math.random()*10);		readCellData(nRow-1, index);		$("#maps").html("Map: "+ index +"<br>" + "Rank: "+(nRow-1)+ "<br>"+"Hard: "+Hardness);		 		// initialize the existence of each div:		for(var i=0; i < nRow; i++){				for(var j=0; j < nCol; j++){						if(countNBLand(i, j)>=1)DivExist[i*nCol+j] = true; // every pearl must connect to at least one Land in Cell map						else DivExist[i*nCol+j] = false;	//// Important! Otherwise without this statement, some previous divs will affect the new game	and make bugs				}		}				// FACT: a div exists iff it has at least one neighbour Land.		// We use function countNBLand() to count the number of its neighbour Lands.		nPearls = 0;		for(var i=0; i < nRow; i++){  				for(var j=0; j < nCol; j++){						if(!DivExist[i*nCol+j]) continue;										//create bear objects:						div[i*nCol+j] = document.createElement("div");						div[i*nCol+j].className = "div";  						div[i*nCol+j].id = "div"+(i*nCol+j);						document.body.appendChild(div[i*nCol+j]);        						div[i*nCol+j].appendChild(document.createTextNode(i*nCol+j + 1));												//div[i] style: 						div[i*nCol+j].style.textAlign = "center";  						div[i*nCol+j].style.color='blue'; 						div[i*nCol+j].style.background='lightgrey'; 						div[i*nCol+j].style.width='40px';  						div[i*nCol+j].style.height='40px'; 						div[i*nCol+j].style.position='fixed'; 						div[i*nCol+j].style.left=80*(j+1)+'px'; 						div[i*nCol+j].style.top=80*(i+1)+'px';						div[i*nCol+j].style.padding='10px';						div[i*nCol+j].style.border='2px solid #2aaaaa';							DivVisited[i*nCol+j] = false;						nPearls++;				}						}				// set off with a random pearl as the first pearl:		p = 1;		do {			row = Math.floor(Math.random() * nRow); 				col = Math.floor(Math.random() * nCol); 		}while(!DivExist[row*nCol+col]);		div[row*nCol+col].style.background='gold';		DivVisited[row*nCol+col] = true;				DivVisitedRow[p] = row;		DivVisitedCol[p] = col;}createManyDivs2D(nRow,nCol);  function drawInitThreads(nRow,nCol){		for(var i=0; i < nRow; i++){  				for(var j=0; j < nCol; j++){							ThreadHExist[i*nCol+j] = false;							ThreadVExist[i*nCol+j] = false;							ThreadHVisited[i*nCol+j] = false;							ThreadVVisited[i*nCol+j] = false;				}		}				for(var i=0; i < nRow-1; i++){  				for(var j=0; j < nCol-1; j++){						if(!DivExist[i*nCol+j]) continue;												// create a horizontal thread div:						if(DivExist[i*nCol+j+1]) {							if(i<=nRow-2 && i>=1 && Cell[(i-1)*(nCol-1)+j]==Cell[i*(nCol-1)+j] && Math.random()< Probability) { }							else{									threadH[i*nCol+j] = document.createElement("div");									threadH[i*nCol+j].className = "threadH";  									threadH[i*nCol+j].id = "threadH"+(i*nCol+j);									document.body.appendChild(threadH[i*nCol+j]);  																		//div[i] style:									threadH[i*nCol+j].style.color='blue'; 									threadH[i*nCol+j].style.background='lightgrey'; 									threadH[i*nCol+j].style.width='15px';  									threadH[i*nCol+j].style.height='3px'; 									threadH[i*nCol+j].style.position='fixed';//'absolute';									threadH[i*nCol+j].style.left=(80*(j+1)+62)+'px'; 									threadH[i*nCol+j].style.top=(80*(i+1)+29)+'px';									threadH[i*nCol+j].style.border='2px solid #2aaaaa';																		ThreadHExist[i*nCol+j] = true;																}						}																	// create a vertical thread div:						if(DivExist[(i+1)*nCol+j]) {							if(j<=nCol-2 && j>=1 && Cell[i*(nCol-1)+j-1]==Cell[i*(nCol-1)+j] && Math.random() < Probability) { }							else{									threadV[i*nCol+j] = document.createElement("div");									threadV[i*nCol+j].className = "threadV"; 									threadV[i*nCol+j].id = "threadV"+(i*nCol+j);									document.body.appendChild(threadV[i*nCol+j]);  																		//div[i] style:									threadV[i*nCol+j].style.color='blue';									threadV[i*nCol+j].style.background='lightgrey';									threadV[i*nCol+j].style.width='3px'; 									threadV[i*nCol+j].style.height='15px';									threadV[i*nCol+j].style.position='fixed';									threadV[i*nCol+j].style.left=(80*(j+1)+29)+'px';									threadV[i*nCol+j].style.top=(80*(i+1)+62)+'px';									threadV[i*nCol+j].style.border='2px solid #2aaaaa';																			ThreadVExist[i*nCol+j] = true;								}									}				}						}				// create thread divs on the most right (vertical):		for(var i=0; i < nRow-1; i++){		 				if(!DivExist[i*nCol+nCol-1] || !DivExist[(i+1)*nCol+nCol-1]) continue;								ThreadVExist[i*nCol+nCol-1] = true;									// create a vertical thread div:				threadV[i*nCol+nCol-1] = document.createElement("div");				threadV[i*nCol+nCol-1].className = "threadV";  				threadV[i*nCol+nCol-1].id = "threadV"+(i*nCol+nCol-1);				document.body.appendChild(threadV[i*nCol+nCol-1]);  								//div[i] style:				threadV[i*nCol+nCol-1].style.color='blue'; 				threadV[i*nCol+nCol-1].style.background='lightgrey';				threadV[i*nCol+nCol-1].style.width='3px';  				threadV[i*nCol+nCol-1].style.height='15px'; 				threadV[i*nCol+nCol-1].style.position='fixed'; 				threadV[i*nCol+nCol-1].style.left=(80*nCol+29)+'px'; 				threadV[i*nCol+nCol-1].style.top=(80*(i+1)+62)+'px';				threadV[i*nCol+nCol-1].style.border='2px solid #2aaaaa';				 		}				// create thread divs on the bottom (horizontal):		for(var j=0; j < nCol-1; j++){		 				if(!DivExist[(nRow-1)*nCol+j] || !DivExist[(nRow-1)*nCol+j+1]) continue;								ThreadHExist[(nRow-1)*nCol+j] = true;									// create a horizontal thread div:				threadH[(nRow-1)*nCol+j] = document.createElement("div");				threadH[(nRow-1)*nCol+j].className = "threadH";  				threadH[(nRow-1)*nCol+j].id = "threadH"+((nRow-1)*nCol+j);				document.body.appendChild(threadH[(nRow-1)*nCol+j]); 				//div[i] style:				threadH[(nRow-1)*nCol+j].style.color='blue'; 				threadH[(nRow-1)*nCol+j].style.background='lightgrey'; 				threadH[(nRow-1)*nCol+j].style.width='15px';  				threadH[(nRow-1)*nCol+j].style.height='3px'; 				threadH[(nRow-1)*nCol+j].style.position='fixed'; 				threadH[(nRow-1)*nCol+j].style.left=(80*(j+1)+62)+'px'; 				threadH[(nRow-1)*nCol+j].style.top=(80*nRow+29)+'px';				threadH[(nRow-1)*nCol+j].style.border='2px solid #2aaaaa';		}}drawInitThreads(nRow,nCol);function whichThread(rowNew, colNew){				var VorH, threadIndex;		if(rowNew==row) {			VorH = 'H';			if(colNew<col) threadIndex = row*nCol+colNew;			else threadIndex = row*nCol+col;		}		else{//colNew==col			VorH = 'V';			if(rowNew<row)  threadIndex = rowNew*nCol+colNew;				else threadIndex = row*nCol+colNew;		}		return [VorH, threadIndex];}function moveForward(rowNew, colNew, VorH, threadIndex){		$("#thread"+ VorH + threadIndex).css("background-color","gold");		$("#thread"+ VorH + threadIndex).css("border","3px solid #2aaaaa");		if(VorH=='H')ThreadHVisited[threadIndex] = true;		else ThreadVVisited[threadIndex] = true;				if(p==nPearls) return;				p = p + 1;		row = rowNew;		col = colNew;		$("#div"+(row*nCol+col)).css("background-color","lightgreen");		DivVisited[row*nCol+col] = true; 		DivVisitedRow[p] = row;				DivVisitedCol[p] = col; }function showScoreAndTime(ms){		var time = Math.floor(( new Date().getTime() - ms)/1000);		var min = Math.floor(time/60);		var sec = time - min*60;		var score = Math.floor(p*100/time) + Rank*1000;		if(Score<score) Score = score;		if(min==0)alert( "Succeeded!\nScore: " +  Score + "; time: " + sec + "s.\nEnter for new game." );		else if(sec==0) alert( "Succeeded!\nScore: " +  Score + "; time: " + min + "m.\nEnter for new game." );		else alert( "Succeeded!\nScore: " +  Score + "; time: " + min + "m" + sec + "s.\nEnter for new game." );				$( "#p1" ).html( "<strong> Gold Thread -- Score: " + Score + " </strong>" );}// to clearly show the gold threads when succeed:function sprinkle(){ 	for(var k=0; k<2; k++){		for(var i=0; i < nRow; i++){			for(var j=0; j < nCol; j++){				if(ThreadHExist[i*nCol+j]){					//if($("#threadH"+(i*nCol+j)).style.backgroundColor=='gold'){					if(k==0 || ThreadHVisited[i*nCol+j]){							$("#threadH"+(i*nCol+j)).fadeOut(800);								$("#threadH"+(i*nCol+j)).fadeIn(800);					}					else $(threadH[i*nCol+j]).remove();					//alert("Sprinkle");				}				 				if(ThreadVExist[i*nCol+j]){					if(k==0 || ThreadVVisited[i*nCol+j]){							$("#threadV"+(i*nCol+j)).fadeOut(800);								$("#threadV"+(i*nCol+j)).fadeIn(800);					}					else $(threadV[i*nCol+j]).remove();					//alert("Sprinkle2");				}			}		}	}	} function newGameOrUpgrade(success){		ms = 0; 				if(success) play += 1;		else {			p = 1;								row = DivVisitedRow[p];			col = DivVisitedCol[p];						DivVisited[row*nCol+col] = true;						}				for(var i=0; i < nRow; i++){			for(var j=0; j < nCol; j++){				if(DivExist[i*nCol+j]) {					if(success) $("#div"+(i*nCol+j)).remove();					else if(i!=row || j!=col){ // not touch the first pearl						$("#div"+(i*nCol+j)).css("background-color","lightgrey");							DivVisited[i*nCol+j] = false;					}				}												if(ThreadHExist[i*nCol+j]) {					if(success) $("#threadH"+(i*nCol+j)).remove();  					else {						$("#threadH"+(i*nCol+j)).css("background-color","lightgrey");							$("#threadH"+(i*nCol+j)).css("border","2px solid #2aaaaa");					}					ThreadHVisited[i*nCol+j] = false;				} 								if(ThreadVExist[i*nCol+j]) {					if(success) $("#threadV"+(i*nCol+j)).remove();					else {						$("#threadV"+(i*nCol+j)).css("background-color","lightgrey");							$("#threadV"+(i*nCol+j)).css("border","2px solid #2aaaaa");					}					ThreadVVisited[i*nCol+j] = false;				}			}		}				if(!success) return;				// upgrade to a new rank		if(play % nPlayOnSameRank == 0) { // play nPlayOnSameRank times then upgrade to a higher rank							nRow += 1;			nCol += 1;			Rank += 1;			play = 0;						if(Rank == HighestRank+1) { 				for(var i=0; i < nRow; i++){					for(var j=0; j < nCol; j++){						$("#div"+(i*nCol+j)).remove();						$("#threadH"+(i*nCol+j)).remove();						$("#threadV"+(i*nCol+j)).remove();					}					}					$( "#p1" ).html( "<strong> Congratulations!\nYou have come through the game! Score: " + Score + " </strong>" );				$( "#maps").remove();				$( "#instruct").remove();				return;			}				}		createManyDivs2D(nRow,nCol);		drawInitThreads(nRow,nCol);			Success = false;	}function withdraw(){		//recover the current pearl:		row = DivVisitedRow[p];		col = DivVisitedCol[p];		$("#div"+(row*nCol+col)).css("background-color","lightgrey");			DivVisited[row*nCol+col] = false;					p = p - 1;			rowNew = DivVisitedRow[p];		colNew = DivVisitedCol[p];				//recover the thread connect the current pearl and previous pearl:				var res = whichThread(rowNew, colNew);		var VorH = res[0];		var threadIndex = res[1];	 				if(VorH=='H' && typeof threadH[threadIndex]==='undefined' || VorH=='V' && typeof threadV[threadIndex]==='undefined')			alert("#thread"+ VorH + threadIndex+" undefined");		$("#thread"+ VorH + threadIndex).css("background-color","lightgrey");		$("#thread"+ VorH + threadIndex).css("border","2px solid #2aaaaa");		if(VorH=='H') ThreadHVisited[threadIndex] = false;		else ThreadVVisited[threadIndex] = false;				row = DivVisitedRow[p];		col = DivVisitedCol[p];}// keyboard event handler: $(document).ready(function(){				$(this).keyup(function(event){			if(Rank == HighestRank+1) {				//alert("Congratulations!\nYou have gone through the game!");				return;			}							var keycode = event.keyCode;				 			if(keycode==13) {				newGameOrUpgrade(p==nPearls); // p<nPearls: reset; p==nPearls: new game			}						else if(Success) return;						// go forward:			if(keycode<=40 && keycode>=37){				// begin timing:				if(ms==0) ms = new Date().getTime(); 								var rowNew;				var colNew;					var VorH;					var threadIndex;				switch(keycode) {					case 37: colNew = col-1; if(colNew<0) colNew=0; rowNew = row; VorH = 'H'; threadIndex = row*nCol+colNew; break;					case 38: rowNew = row-1; if(rowNew<0) rowNew=0; colNew = col; VorH = 'V'; threadIndex = rowNew*nCol+colNew; break;					case 39: colNew = col+1; if(colNew==nCol) colNew=nCol-1; rowNew = row; VorH = 'H'; threadIndex = row*nCol+col; break;					case 40: rowNew = row+1; if(rowNew==nRow) rowNew=nRow-1; colNew = col; VorH = 'V'; threadIndex = row*nCol+colNew; break;					default: break;				} 										// do move forward:				if(DivExist[rowNew*nCol+colNew] && !DivVisited[rowNew*nCol+colNew]) {						if((VorH=='H' && (!ThreadHExist[threadIndex] || typeof threadH[threadIndex] === 'undefined')) || (VorH=='V' && (!ThreadVExist[threadIndex] || typeof threadV[threadIndex] === 'undefined'))){ }					else {						moveForward(rowNew, colNew, VorH, threadIndex);												//succeed, show score & time, begin a new game or a new rank:						if(p==nPearls) {							if(Math.abs(row-DivVisitedRow[1])>1 || Math.abs(col-DivVisitedCol[1])>1) {									alert("Failed! Because it is not a cyclic necklace.");										newGameOrUpgrade(false);									}							else {												// add one more move to home:									rowNew = DivVisitedRow[1];									colNew = DivVisitedCol[1];									var res = whichThread(rowNew, colNew);									var VorH = res[0];									var threadIndex = res[1];	 									moveForward(rowNew, colNew, VorH, threadIndex); 																		showScoreAndTime(ms); 									sprinkle();									Success = true;								}							}					}					}			}							// or withdraw:				else if(keycode == 27) { //keycode 27 is Esc				if(p==1) return; 				withdraw(); 			}		}); }); </script><style type="text/css">.div{ border-radius:40px}</style></body></html> 